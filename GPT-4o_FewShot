import openai
import os
import json
import time

openai.api_key = ''  # Ensure to set your OpenAI API key here

def read_full_content(file_path):
    try:
        with open(file_path, 'r', encoding='utf-8') as file:
            return file.read()
    except Exception as e:
        print(f"Error reading file {file_path}: {e}")
        return ""

def analyze_full_transcript(transcript, real_score):
    messages = [
        {
            "role": "system",
            "content": "You are a helpful assistant analyzing personality traits based on provided transcripts and a reference score."
        },
        {
            "role": "user",
            "content": f"""
The following transcript is a conversation between an ‘interviewer’ and ‘interviewee’:
{transcript}
"""
        }
    ]
    
    response = openai.ChatCompletion.create(
        model="gpt-4",
        messages=messages,
        max_tokens=1500,
        n=1,
        stop=None,
        temperature=0.7
    )
    
    analysis = response.choices[0].message['content']
    return analysis

def main():
    file_path = 'path_to_your_transcript_file.txt'  # Update with your file path
    real_score = 5  # Example score, update as needed
    
    transcript = read_full_content(file_path)
    if transcript:
        analysis = analyze_full_transcript(transcript, real_score)
        print("Analysis Result:")
        print(analysis)
    else:
        print("Failed to read the transcript file.")

if __name__ == "__main__":
    main()